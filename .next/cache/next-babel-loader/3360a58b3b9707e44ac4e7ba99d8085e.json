{"ast":null,"code":"import BaseAction from '~/packages/BaseAction';\nimport PageLoaderAction from '~/packages/Base/actions/PageLoaderAction';\nimport AlertMessageAction from '~/packages/Base/actions/AlertMessageAction';\nimport NewsletterService from '../services/NewsletterService';\nexport const newsletterConsts = {\n  SET_ITEM: 'NEWSLETTER_SET_ITEM',\n  RESET_ITEM: 'NEWSLETTER_RESET_ITEM',\n  GET_CLIENT_IP: 'NEWSLETTER_GET_CLIENT_IP',\n  SENDINBLUE_CREATE_CONTACT: 'NEWSLETTER_SENDINBLUE_CREATE_CONTACT'\n};\nexport default class NewsletterAction extends BaseAction {\n  constructor() {\n    super();\n    this.service = new NewsletterService();\n    this.consts = newsletterConsts;\n  }\n\n  setItem(item) {\n    return dispatch => {\n      dispatch({\n        type: this.consts.SET_ITEM,\n        item: item\n      });\n    };\n  }\n\n  resetItem() {\n    return dispatch => {\n      dispatch({\n        type: this.consts.RESET_ITEM\n      });\n    };\n  }\n\n  getClientIp() {\n    return dispatch => {\n      this.service.getClientIp().then(response => {\n        dispatch({\n          type: this.consts.GET_CLIENT_IP,\n          clientIp: response.data.clientIp\n        });\n      }).catch(error => {});\n    };\n  }\n\n  sendinblue_createContact(params) {\n    return dispatch => {\n      dispatch(PageLoaderAction.show());\n      this.service.sendinblue_createContact(params).then(response => {\n        dispatch(this.resetItem());\n        dispatch(AlertMessageAction.alertMessageSuccess('Ti ringraziamo per esserti registrato alla newsletter. Ti terremo aggiornati sulle nostre offerte.'));\n        dispatch(PageLoaderAction.hide());\n      }).catch(error => {\n        dispatch(AlertMessageAction.alertMessageError(error.response.data.meta.message));\n        dispatch(PageLoaderAction.hide());\n      });\n    };\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}