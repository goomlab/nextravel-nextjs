{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport Link from \"next/link\";\nimport MenuService from \"~/packages/Post/services/MenuService\";\nimport PostService from \"~/packages/Post/services/PostService\";\nimport HotelService from \"~/packages/TravelgoOne/services/HotelService\";\nimport Layout from \"~/components/Layouts/MainLayout/MainLayout\";\nimport BookingSearchBox from \"~/components/Partials/BookingSearchBox\";\nimport HotelArchive from \"~/components/Partials/HotelArchive\";\n\nvar Index = function Index(props) {\n  if (!props.page || props.page.length <= 0) {\n    return __jsx(Layout, {\n      settings: {\n        menu: props.menu\n      }\n    }, __jsx(\"div\", null, \"Data not found\"));\n  }\n\n  React.useEffect(function () {\n    var filter = {\n      loc_id: props.query.loc_id || '',\n      category_id: props.query.category_id || '',\n      checkin: props.query.checkin || '',\n      checkout: props.query.checkout || '',\n      nights: props.query.nights || '',\n      page: 1,\n      num_per_page: 15 // orderBy: 'date_from',\n      // orderHow: 'asc'\n\n    };\n    var hotelService = new HotelService();\n    hotelService.query(filter).then(function (response) {\n      console.log('response', response);\n    });\n  }, []);\n  return __jsx(Layout, {\n    settings: {\n      template: \"accommodation-page\",\n      menu: props.menu\n    }\n  }, __jsx(BookingSearchBox, {\n    query: props.query\n  }), __jsx(\"section\", {\n    className: \"section-main\"\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"div\", {\n    className: \"primary-title text-center\"\n  }, __jsx(\"h2\", null, \"Prenota la tua vacanza tra una vasta scelta di Hotel selezionati.\")), __jsx(\"div\", {\n    className: \"primary-description text-center\"\n  }, \"Per qualsiasi informazione non esitare a contattarci allo\", \" \", __jsx(\"strong\", null, process.env.contacts.phone.label)))), __jsx(HotelArchive, {\n    hotels: props.hotels.data\n  }));\n};\n\nIndex.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var filter, menu, page, hotels, menuService, postService, hotelService;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            filter = {\n              loc_id: ctx.query.loc_id || '',\n              category_id: ctx.query.category_id || '',\n              checkin: ctx.query.checkin || '',\n              checkout: ctx.query.checkout || '' // nights: ctx.query.nights || '',\n              // page: 1,\n              // num_per_page: 15,\n              // orderBy: 'date_from',\n              // orderHow: 'asc'\n\n            };\n            menu = null;\n            page = null;\n            hotels = [];\n            _context.prev = 4;\n            // initialProps = mainInitialProps();\n            menuService = new MenuService();\n            _context.next = 8;\n            return menuService.get(1);\n\n          case 8:\n            menu = _context.sent;\n            postService = new PostService();\n            _context.next = 12;\n            return postService.get(1);\n\n          case 12:\n            page = _context.sent;\n            hotelService = new HotelService();\n            _context.next = 16;\n            return hotelService.query(filter);\n\n          case 16:\n            hotels = _context.sent;\n            _context.next = 21;\n            break;\n\n          case 19:\n            _context.prev = 19;\n            _context.t0 = _context[\"catch\"](4);\n\n          case 21:\n            return _context.abrupt(\"return\", {\n              params: ctx.params,\n              query: ctx.query,\n              menu: menu,\n              page: page,\n              hotels: hotels\n            });\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4, 19]]);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}