{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport Link from \"next/link\";\nimport BaseService from \"~/packages/BaseService\";\nimport MenuService from \"~/packages/Post/services/MenuService\";\nimport PageFilterService from \"~/packages/TravelgoOne/services/PageFilterService\";\nimport HotelService from \"~/packages/TravelgoOne/services/HotelService\";\nimport TemplateArchiveHotel from \"~/components/Templates/TemplateArchiveHotel\";\n\nvar Index = function Index(props) {\n  return __jsx(TemplateArchiveHotel, props);\n};\n\nIndex.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(params) {\n    var menu, locs, hotelCategories, page, hotels, searchParams, baseService, init, menuService, pageFilterService, hotelService;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // let initialProps = {};\n            menu = null;\n            locs = [];\n            hotelCategories = [];\n            page = null;\n            hotels = [];\n            searchParams = {\n              page: 1,\n              paginate: process.env.pagination.paginate,\n              orderBy: 'order_seq',\n              orderHow: 'asc'\n            };\n            _context.prev = 6;\n            // initialProps = mainInitialProps();\n            baseService = new BaseService();\n            _context.next = 10;\n            return baseService.initApp();\n\n          case 10:\n            init = _context.sent;\n            locs = init.locs || [];\n            hotelCategories = init.hotelCategories || [];\n            menuService = new MenuService();\n            _context.next = 16;\n            return menuService.get(1);\n\n          case 16:\n            menu = _context.sent;\n            pageFilterService = new PageFilterService();\n            _context.next = 20;\n            return pageFilterService.getBySlug(params.query.slug);\n\n          case 20:\n            page = _context.sent;\n\n            if (!page) {\n              _context.next = 33;\n              break;\n            }\n\n            if (page.date_from) searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              checkin: page.date_from\n            });\n            if (page.date_to) searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              checkout: page.date_to\n            });\n            if (page.loc_id) searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              loc_id: page.loc_id\n            });\n            if (page.category_id) searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              category_id: page.category_id\n            });\n            if (parseInt(page.stars) > 0) searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              stars: page.stars\n            });\n            searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              hasEmptyPeriods: true,\n              orderBy: 'order_seq',\n              orderHow: 'asc',\n              paginate: process.env.pagination.paginate\n            }); // console.log('search',searchParams)\n\n            hotelService = new HotelService();\n            _context.next = 31;\n            return hotelService.query(searchParams);\n\n          case 31:\n            hotels = _context.sent;\n            console.log('hotels', hotels, searchParams);\n\n          case 33:\n            _context.next = 38;\n            break;\n\n          case 35:\n            _context.prev = 35;\n            _context.t0 = _context[\"catch\"](6);\n            console.log('error', _context.t0);\n\n          case 38:\n            return _context.abrupt(\"return\", {\n              menu: menu,\n              locs: locs,\n              hotelCategories: hotelCategories,\n              page: page,\n              hotels: hotels,\n              searchParams: searchParams\n            });\n\n          case 39:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 35]]);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}