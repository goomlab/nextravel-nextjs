{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { connect } from 'react-redux';\nimport Link from \"next/link\";\nimport MenuService from \"~/packages/Post/services/MenuService\";\nimport PostService from \"~/packages/Post/services/PostService\";\nimport HotelService from \"~/packages/TravelgoOne/services/HotelService\";\nimport PageFilterService from \"~/packages/TravelgoOne/services/PageFilterService\";\nimport RatePlanPeriodService from \"~/packages/TravelgoOne/services/RatePlanPeriodService\";\nimport Layout from \"~/components/Layouts/MainLayout/MainLayout\";\nimport BookingSearchBox from \"~/components/Partials/BookingSearchBox\";\n\nvar SitemapHotels = function SitemapHotels(props) {\n  return __jsx(\"div\", {\n    className: \"row mb-5\"\n  }, __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(\"h2\", null, \"Strutture ricettive\")), props.models.map(function (model, index) {\n    return __jsx(\"div\", {\n      className: \"col-sm-6 col-lg-4 footer-menu-col\",\n      key: index\n    }, __jsx(Link, {\n      as: \"\".concat(process.env.accommodations_path, \"/\").concat(model.slug.it),\n      href: {\n        pathname: \"\".concat(process.env.accommodations_path, \"/\").concat(model.slug.it)\n      }\n    }, __jsx(\"a\", {\n      className: \"goto\"\n    }, model.title.it)));\n  }));\n};\n\nvar SitemapFilterPages = function SitemapFilterPages(props) {\n  return __jsx(\"div\", {\n    className: \"row mb-5\"\n  }, __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(\"h2\", null, \"Offerte\")), props.models.map(function (model, index) {\n    return __jsx(\"div\", {\n      className: \"col-sm-6 col-lg-4 footer-menu-col\",\n      key: index\n    }, __jsx(Link, {\n      as: \"/offerte/\".concat(model.slug.it),\n      href: {\n        pathname: \"/offerte/\".concat(model.slug.it)\n      }\n    }, __jsx(\"a\", {\n      className: \"goto\"\n    }, model.title.it)));\n  }));\n};\n\nvar SitemapPages = function SitemapPages(props) {\n  return __jsx(\"div\", {\n    className: \"row mb-5\"\n  }, __jsx(\"div\", {\n    className: \"col-12\"\n  }, __jsx(\"h2\", null, \"Pagine\")), props.models.map(function (model, index) {\n    return __jsx(\"div\", {\n      className: \"col-sm-6 col-lg-4 footer-menu-col\",\n      key: index\n    }, __jsx(Link, {\n      as: \"/\".concat(model.slug.it),\n      href: {\n        pathname: \"/\".concat(model.slug.it)\n      }\n    }, __jsx(\"a\", {\n      className: \"goto\"\n    }, model.title.it)));\n  }));\n};\n\nvar SitemapHtml = function SitemapHtml(props) {\n  console.log('props', props);\n  return __jsx(Layout, {\n    settings: {\n      template: \"sitemap-page\",\n      menu: props.menu\n    },\n    meta: {\n      title: \"Mappa del sito\",\n      description: \"Mappa del sito\",\n      url: \"\".concat(process.env.meta.url, \"/sitemap-html\"),\n      image: null\n    }\n  }, __jsx(BookingSearchBox, {\n    query: props.query\n  }), __jsx(\"section\", {\n    className: \"section-main single-hotel-section\"\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"h1\", {\n    className: \"mb-5\"\n  }, \"Sitemap\"), __jsx(SitemapHotels, {\n    models: props.hotels || []\n  }), __jsx(SitemapFilterPages, {\n    models: props.pagefilters || []\n  }), __jsx(SitemapPages, {\n    models: props.pages || []\n  }))));\n};\n\nSitemapHtml.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var menu, pages, hotels, pagefilters, rateplanperiods, menuService, postService, hotelService, pagefilterService;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            menu = null;\n            pages = [];\n            hotels = [];\n            pagefilters = [];\n            rateplanperiods = [];\n            _context.prev = 5;\n            menuService = new MenuService();\n            _context.next = 9;\n            return menuService.get(1);\n\n          case 9:\n            menu = _context.sent;\n            postService = new PostService();\n            _context.next = 13;\n            return postService.all({\n              stauts: {\n                key: 'status',\n                compare: '=',\n                value: 1\n              },\n              order: ['name', 'asc']\n            });\n\n          case 13:\n            _context.t0 = _context.sent;\n\n            if (_context.t0) {\n              _context.next = 16;\n              break;\n            }\n\n            _context.t0 = [];\n\n          case 16:\n            pages = _context.t0;\n            hotelService = new HotelService();\n            _context.next = 20;\n            return hotelService.all({\n              status: {\n                key: 'status',\n                compare: '=',\n                value: 1\n              },\n              order: ['name', 'asc']\n            });\n\n          case 20:\n            _context.t1 = _context.sent;\n\n            if (_context.t1) {\n              _context.next = 23;\n              break;\n            }\n\n            _context.t1 = [];\n\n          case 23:\n            hotels = _context.t1;\n            pagefilterService = new PageFilterService();\n            _context.next = 27;\n            return pagefilterService.all({\n              stauts: {\n                key: 'status',\n                compare: '=',\n                value: 1\n              }\n            });\n\n          case 27:\n            _context.t2 = _context.sent;\n\n            if (_context.t2) {\n              _context.next = 30;\n              break;\n            }\n\n            _context.t2 = [];\n\n          case 30:\n            pagefilters = _context.t2;\n            _context.next = 36;\n            break;\n\n          case 33:\n            _context.prev = 33;\n            _context.t3 = _context[\"catch\"](5);\n            console.log('error', _context.t3);\n\n          case 36:\n            return _context.abrupt(\"return\", {\n              params: ctx.params,\n              query: ctx.query,\n              menu: menu,\n              pages: pages,\n              hotels: hotels,\n              pagefilters: pagefilters,\n              rateplanperiods: rateplanperiods\n            });\n\n          case 37:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[5, 33]]);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default SitemapHtml; // const mapStateToProps = (state) => {\n// \treturn {\n//     hotelLoading: state.hotel.loading,\n//     hotelSeatchParams: state.hotel.params,\n// \t\thotels: state.hotel.items,\n//     hotelMeta: state.hotel.meta,\n// \t}\n// }\n// const mapDispatchToProps = (dispatch) => {\n//   let hotelAction = new HotelAction()\n//   return {\n//     loading: (state) => {\n//       dispatch(hotelAction.loading(state))\n//     },\n//     query: (data) => {\n//       dispatch(hotelAction.query(data))\n//     },\n//   }\n// }\n// export default connect(mapStateToProps, mapDispatchToProps)(SitemapHtml);","map":null,"metadata":{},"sourceType":"module"}