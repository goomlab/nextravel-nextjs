{"ast":null,"code":"import React from 'react';\nimport moment from 'moment';\nimport RatePlanPeriodService from \"~/packages/TravelgoOne/services/RatePlanPeriodService\";\n\nconst createSitemap = models => `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    <urlset xmlns=\"http://www.sitemaps.org/schemas/sitemap/0.9\">\n        ${models.map((model, index) => {\n  let updatedAt = moment(model.updated_at, \"DD/MM/YYYY hh:mm:ss\").toISOString(); // 12/03/2021 17:05:06  -->  2021-02-17T11:39:04+00:00\n\n  return `\n                    <url>\n                        <loc>${`${process.env.app_url}/strutture-ricettive/${model.rateplan.hotel.slug.it}/booking/${model.id}`}</loc>\n                        <lastmod>${updatedAt}</lastmod>\n                    </url>\n                `;\n}).join('')}\n    </urlset>\n    `;\n\nclass Sitemap extends React.Component {\n  static async getInitialProps({\n    res\n  }) {\n    let service = new RatePlanPeriodService();\n    let models = (await service.all({\n      status: {\n        key: 'status',\n        compare: '=',\n        value: 1\n      }\n    })) || []; // const request = await fetch(EXTERNAL_DATA_URL);\n    // const posts = await request.json();\n\n    res.setHeader('Content-Type', 'text/xml');\n    res.write(createSitemap(models));\n    res.end();\n  }\n\n}\n\nexport default Sitemap;","map":null,"metadata":{},"sourceType":"module"}