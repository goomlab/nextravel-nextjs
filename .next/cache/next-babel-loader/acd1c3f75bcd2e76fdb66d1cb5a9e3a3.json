{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { connect } from 'react-redux';\nimport Link from \"next/link\";\nimport NextHead from 'next/head';\nimport { HotelSchema, makeHotelSchema } from \"~/components/JsonLdSchema\";\nimport BaseService from \"~/packages/BaseService\";\nimport MenuService from \"~/packages/Post/services/MenuService\";\nimport PostService from \"~/packages/Post/services/PostService\";\nimport HotelService from \"~/packages/TravelgoOne/services/HotelService\";\nimport LocService from \"~/packages/TravelgoOne/services/LocService\";\nimport HotelCategoryService from \"~/packages/TravelgoOne/services/HotelCategoryService\";\nimport HotelAction from \"~/packages/TravelgoOne/actions/HotelAction\";\nimport Layout from \"~/components/Layouts/MainLayout/MainLayout\";\nimport BookingSearchBox from \"~/components/Partials/BookingSearchBox\"; // import HotelArchive from \"~/components/Partials/HotelArchive\";\n\nimport HotelArchive2 from \"~/components/Partials/HotelArchive2\";\nimport HomeRecap from \"~/components/Partials/HomeRecap\";\nimport Newsletter from \"~/components/Partials/Newsletter\";\n\nvar Index = function Index(props) {\n  if (!props.page || props.page.length <= 0) {\n    return __jsx(Layout, {\n      settings: {\n        menu: props.menu\n      }\n    }, __jsx(\"div\", null, \"Data not found\"));\n  }\n\n  React.useEffect(function () {\n    props.query({\n      hasEmptyPeriods: true,\n      orderBy: 'order_seq',\n      orderHow: 'asc',\n      paginate: process.env.pagination.paginate\n    });\n  }, []);\n  return __jsx(Layout, {\n    settings: {\n      template: \"front-page\",\n      menu: props.menu\n    },\n    meta: {\n      title: props.page.meta_title.it,\n      description: props.page.meta_description.it,\n      url: \"\".concat(process.env.meta.url),\n      // image: (props.page.media && props.page.media.gallery && props.page.media.gallery[0]) ? props.page.media.gallery[0].url : null\n      image: props.page.media && props.page.media.thumbnails && props.page.media.thumbnails[0] ? props.page.media.thumbnails[0].url : null\n    }\n  }, props.hotels && props.hotels && __jsx(NextHead, null, props.hotels && props.hotels && Object.entries(props.hotels).map(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        hotel = _ref2[1];\n\n    return __jsx(\"script\", {\n      key: \"jobJSON-\".concat(hotel.id),\n      type: \"application/ld+json\",\n      dangerouslySetInnerHTML: {\n        __html: JSON.stringify(makeHotelSchema(hotel))\n      }\n    });\n  })), __jsx(\"section\", {\n    className: \"section-main section-first home\"\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"div\", {\n    className: \"row\"\n  }, __jsx(\"div\", {\n    className: \"col-lg-7\"\n  }, __jsx(\"div\", {\n    className: \"primary-title\"\n  }, __jsx(\"h1\", null, props.page.subtitle.it), __jsx(\"span\", {\n    style: {\n      color: \"#384044\",\n      textDecoration: \"underline\"\n    }\n  }, \"Chiama! \", process.env.contacts.phone.label))), __jsx(\"div\", {\n    className: \"col-lg-4 col-offset-1\"\n  }, __jsx(\"div\", {\n    className: \"primary-description\"\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: props.page.content.it\n    }\n  })))))), __jsx(BookingSearchBox, {\n    query: props.query,\n    full: true\n  }), __jsx(\"section\", {\n    className: \"section-main\"\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"div\", {\n    className: \"primary-title text-center\"\n  }, __jsx(\"h2\", null, \"Prenota la tua vacanza tra una vasta scelta di Hotel selezionati.\")), __jsx(\"div\", {\n    className: \"primary-description text-center\"\n  }, \"Per qualsiasi informazione non esitare a contattarci allo\", \" \", __jsx(\"strong\", null, process.env.contacts.phone.label)))), console.log('props hotels', props.hotels), __jsx(HotelArchive2, {\n    hotels: props.hotels ? props.hotels : []\n  }), props.hotels && props.hotels.meta && parseInt(props.hotels.meta.to) < parseInt(props.hotels.meta.last_page) && __jsx(\"section\", {\n    className: \"section-main\"\n  }, __jsx(\"div\", {\n    className: \"container text-center\"\n  }, __jsx(Link, {\n    href: \"\".concat(process.env.accommodations_path),\n    as: \"\".concat(process.env.accommodations_path, \"?page=2\")\n  }, __jsx(\"a\", {\n    className: \"btn btn-more\"\n  }, \"Carica le altre offerte\")))), __jsx(HomeRecap, props), __jsx(Newsletter, null));\n};\n\nIndex.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ctx) {\n    var menu, page, busPage, hotels, menuService, postService;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            menu = null; // let months = [];\n            // let specials = [];\n            // let locs = [];\n            // let hotelCategories = [];\n\n            page = null;\n            busPage = null;\n            hotels = [];\n            _context.prev = 4;\n            // initialProps = mainInitialProps();\n            // let baseService = new BaseService();\n            // let init = await baseService.initApp();\n            // locs = init.locs || [];\n            // hotelCategories = init.hotelCategories || [];\n            // months = init.filterPages.months || [];\n            // specials = init.filterPages.specials || [];\n            menuService = new MenuService();\n            _context.next = 8;\n            return menuService.get(1);\n\n          case 8:\n            menu = _context.sent;\n            postService = new PostService();\n            _context.next = 12;\n            return postService.get(1);\n\n          case 12:\n            page = _context.sent;\n            _context.next = 15;\n            return postService.get(3);\n\n          case 15:\n            busPage = _context.sent;\n            _context.next = 21;\n            break;\n\n          case 18:\n            _context.prev = 18;\n            _context.t0 = _context[\"catch\"](4);\n            console.log('error', _context.t0);\n\n          case 21:\n            return _context.abrupt(\"return\", {\n              params: ctx.params,\n              query: ctx.query,\n              menu: menu,\n              // specials,\n              // locs,\n              // hotelCategories,\n              page: page,\n              busPage: busPage // hotels\n\n            });\n\n          case 22:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4, 18]]);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}(); // export default Index;\n\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    hotels: state.hotel.items\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  var hotelAction = new HotelAction();\n  return {\n    query: function query(data) {\n      dispatch(hotelAction.query(data));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Index);","map":null,"metadata":{},"sourceType":"module"}