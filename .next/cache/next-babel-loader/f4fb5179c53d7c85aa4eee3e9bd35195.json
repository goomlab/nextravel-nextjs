{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/giuseppe/Workspace/Di Costanzo Marco/nextravel.it/www/nextravel-nextjs/pages/accommodations/[accommodation]/booking/[id].js\";\n\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport BaseService from \"~/packages/BaseService\";\nimport MenuService from \"~/packages/Post/services/MenuService\";\nimport PostService from \"~/packages/Post/services/PostService\";\nimport HotelService from \"~/packages/TravelgoOne/services/HotelService\";\nimport RateplanPeriodService from \"~/packages/TravelgoOne/services/RateplanPeriodService\";\nimport Layout from \"~/components/Layouts/MainLayout/MainLayout\";\nimport BookingSearchBox from \"~/components/Partials/BookingSearchBox\";\nimport BookingForm from \"~/components/Partials/BookingForm\";\nimport PriceTable from '~/components/Partials/PriceTable';\n\nvar BookingPage = function BookingPage(props) {\n  console.log('props booking page', props);\n\n  if (!props.hotel || props.hotel.length <= 0) {\n    return __jsx(Layout, {\n      settings: {\n        menu: props.menu\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 9\n      }\n    }, \"Data not found\"));\n  }\n\n  var period = props.period;\n  var hotel = props.hotel;\n  var dateFrom = moment(period.date_from, \"YYYY-MM-DD\");\n  var dateTo = moment(period.date_to, \"YYYY-MM-DD\");\n  var stars = [];\n\n  for (var i = 1; i <= parseInt(hotel.stars); i++) {\n    stars.push(__jsx(\"i\", {\n      key: i,\n      className: \"ico ico-star\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 16\n      }\n    }));\n  }\n\n  var priceList = {};\n\n  for (var _i = 0, _Object$entries = Object.entries(props.period.viewPrices); _i < _Object$entries.length; _i++) {\n    var _Object$entries$_i = _slicedToArray(_Object$entries[_i], 2),\n        key = _Object$entries$_i[0],\n        treatmentObj = _Object$entries$_i[1];\n\n    priceList[key] = {\n      n1: treatmentObj.n1 ? treatmentObj.n1 : null,\n      n2: treatmentObj.n2 ? treatmentObj.n2 : null,\n      n3: treatmentObj.n3 ? treatmentObj.n3 : null,\n      n4: treatmentObj.n4 ? treatmentObj.n4 : null,\n      n5: treatmentObj.n5 ? treatmentObj.n5 : null,\n      n6: treatmentObj.n6 ? treatmentObj.n6 : null,\n      n7: treatmentObj.n7 ? treatmentObj.n7 : null\n    };\n  }\n\n  return __jsx(Layout, {\n    settings: {\n      template: \"booking-page\",\n      menu: props.menu\n    },\n    meta: {\n      title: \"Booking \".concat(props.hotel.meta_title.it),\n      description: \"Booking\",\n      image: props.hotel.media && props.hotel.media.gallery && props.hotel.media.gallery[0] ? props.hotel.media.gallery[0].url : null\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, __jsx(BookingSearchBox, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }), __jsx(\"section\", {\n    className: \"single-hotel-section\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, __jsx(\"figure\", {\n    className: \"img-bgas\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    src: hotel.media && hotel.media.gallery && hotel.media.gallery[0] ? hotel.media.gallery[0].url : 'default',\n    alt: hotel.media && hotel.media.gallery && hotel.media.gallery[0] && hotel.media.gallery[0].name,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: \"topline\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"title mr-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  }, hotel.name), __jsx(\"div\", {\n    className: \"stars\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 15\n    }\n  }, stars)), __jsx(\"div\", {\n    className: \"single-hotel-call ml-auto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }\n  }, \"chiama!\\xA0\", __jsx(\"span\", {\n    className: \"bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 28\n    }\n  }, process.env.contacts.phone.label))))), __jsx(\"section\", {\n    className: \"single-hotel-section\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"hotel-booking-box\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"box1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"col-lg-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 17\n    }\n  }, priceList && Object.entries(priceList).map(function (_ref, index) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        treatment = _ref2[0],\n        prices = _ref2[1];\n\n    return __jsx(\"div\", {\n      className: \"prices-box\",\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 19\n      }\n    }, __jsx(PriceTable, {\n      key: index,\n      index: index,\n      treatment: treatment,\n      prices: prices,\n      hotel: hotel,\n      period: period,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }));\n  })), __jsx(\"div\", {\n    className: \"col-lg-4 offset-lg-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, __jsx(\"div\", {\n    className: \"row mb-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 21\n    }\n  }, __jsx(\"div\", {\n    className: \"col-lg-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 23\n    }\n  }, \"Offerta n. \", period.id), __jsx(\"div\", {\n    className: \"col-lg-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 23\n    }\n  }, \"dal \", dateFrom.format(\"DD/MM/YYYY\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 25\n    }\n  }), \"al \", dateTo.format(\"DD/MM/YYYY\"))), \"per ulteriori informazioni contattaci a\", __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 60\n    }\n  }), __jsx(\"span\", {\n    className: \"bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }, process.env.contacts.email.label))))), console.log('props query', props.query), __jsx(BookingForm, {\n    rateplan: props.period.rateplan || null,\n    hotel: props.period.rateplan.hotel || null,\n    query: props.query,\n    priceList: priceList,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  })))), __jsx(\"section\", {\n    className: \"section-main single-hotel-section\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-lg-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"content-box content-box-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"titoletto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, \"posizione\"), __jsx(\"div\", {\n    className: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, hotel.details.address, __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 42\n    }\n  }), hotel.details.zip_code, \" \", hotel.details.city, \" (\", hotel.details.state, \")\"), __jsx(\"div\", {\n    className: \"titoletto\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, \"distanze\"), __jsx(\"div\", {\n    className: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: hotel.description_near.it\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 19\n    }\n  })), __jsx(\"ul\", {\n    className: \"hotel-service-list\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, hotel.incServices && hotel.incServices.length > 0 && hotel.incServices.map(function (obj, index) {\n    return __jsx(\"li\", {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 21\n      }\n    }, __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 23\n      }\n    }, obj.name));\n  })))), __jsx(\"div\", {\n    className: \"col-lg-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"content-box content-box-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: hotel.description_short.it\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  })))), __jsx(\"div\", {\n    className: \"col-lg-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"content-box content-box-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"description\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: hotel.description_short.it\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 19\n    }\n  }))))))));\n};\n\n_c = BookingPage;\n\nBookingPage.getInitialProps = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(params) {\n    var locs, hotelCategories, menu, page, hotel, period, query, baseService, init, menuService, rateplanPeriodService;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            locs = [];\n            hotelCategories = [];\n            menu = null;\n            page = null;\n            hotel = null;\n            period = null;\n            query = {\n              checkin: params.query.checkin || null,\n              checkout: params.query.checkout || null,\n              treatment: params.query.treatment || null,\n              nights: params.query.nights || null\n            };\n            _context.prev = 7;\n            baseService = new BaseService();\n            _context.next = 11;\n            return baseService.initApp();\n\n          case 11:\n            init = _context.sent;\n            locs = init.locs || [];\n            hotelCategories = init.hotelCategories || [];\n            menuService = new MenuService();\n            _context.next = 17;\n            return menuService.get(1);\n\n          case 17:\n            menu = _context.sent;\n            rateplanPeriodService = new RateplanPeriodService();\n            _context.next = 21;\n            return rateplanPeriodService.get(params.query.id);\n\n          case 21:\n            period = _context.sent;\n\n            if (period && period.rateplan && period.rateplan.hotel) {\n              hotel = period.rateplan.hotel;\n            }\n\n            _context.next = 27;\n            break;\n\n          case 25:\n            _context.prev = 25;\n            _context.t0 = _context[\"catch\"](7);\n\n          case 27:\n            return _context.abrupt(\"return\", {\n              query: query,\n              locs: locs,\n              hotelCategories: hotelCategories,\n              menu: menu,\n              page: page,\n              hotel: hotel,\n              period: period\n            });\n\n          case 28:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[7, 25]]);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default BookingPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"BookingPage\");","map":{"version":3,"sources":["/Users/giuseppe/Workspace/Di Costanzo Marco/nextravel.it/www/nextravel-nextjs/pages/accommodations/[accommodation]/booking/[id].js"],"names":["React","moment","Link","BaseService","MenuService","PostService","HotelService","RateplanPeriodService","Layout","BookingSearchBox","BookingForm","PriceTable","BookingPage","props","console","log","hotel","length","menu","period","dateFrom","date_from","dateTo","date_to","stars","i","parseInt","push","priceList","Object","entries","viewPrices","key","treatmentObj","n1","n2","n3","n4","n5","n6","n7","template","title","meta_title","it","description","image","media","gallery","url","name","process","env","contacts","phone","label","map","index","treatment","prices","id","format","email","query","rateplan","details","address","zip_code","city","state","__html","description_near","incServices","obj","description_short","getInitialProps","params","locs","hotelCategories","page","checkin","checkout","nights","baseService","initApp","init","menuService","get","rateplanPeriodService"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\n\nimport BaseService from \"~/packages/BaseService\";\nimport MenuService from \"~/packages/Post/services/MenuService\";\nimport PostService from \"~/packages/Post/services/PostService\";\nimport HotelService from \"~/packages/TravelgoOne/services/HotelService\";\nimport RateplanPeriodService from \"~/packages/TravelgoOne/services/RateplanPeriodService\";\n\nimport Layout from \"~/components/Layouts/MainLayout/MainLayout\";\nimport BookingSearchBox from \"~/components/Partials/BookingSearchBox\";\nimport BookingForm from \"~/components/Partials/BookingForm\";\nimport PriceTable from '~/components/Partials/PriceTable';\n\nconst BookingPage = props => {console.log('props booking page',props)\n  if (!props.hotel || props.hotel.length <= 0) {\n    return (\n      <Layout settings={{ menu: props.menu }}>\n        <div>Data not found</div>\n      </Layout>\n    );\n  }\n\n  const period = props.period;\n  const hotel = props.hotel;\n\n  let dateFrom = moment(period.date_from, \"YYYY-MM-DD\");\n  let dateTo = moment(period.date_to, \"YYYY-MM-DD\");\n\n  let stars = [];\n  for (let i = 1; i <= parseInt(hotel.stars); i++) {\n    stars.push(<i key={i} className=\"ico ico-star\"></i>);\n  }\n\n  let priceList = {};\n  for (const [key, treatmentObj] of Object.entries(props.period.viewPrices)) {\n    priceList[key] = {\n      n1: (treatmentObj.n1) ? treatmentObj.n1 : null,\n      n2: (treatmentObj.n2) ? treatmentObj.n2 : null,\n      n3: (treatmentObj.n3) ? treatmentObj.n3 : null,\n      n4: (treatmentObj.n4) ? treatmentObj.n4 : null,\n      n5: (treatmentObj.n5) ? treatmentObj.n5 : null,\n      n6: (treatmentObj.n6) ? treatmentObj.n6 : null,\n      n7: (treatmentObj.n7) ? treatmentObj.n7 : null,\n    };\n  }\n\n  return (\n    <Layout \n      settings={{template:\"booking-page\", menu: props.menu}}\n      meta={{\n        title: `Booking ${props.hotel.meta_title.it}`,\n        description: `Booking`,\n        image: (props.hotel.media && props.hotel.media.gallery && props.hotel.media.gallery[0]) ? props.hotel.media.gallery[0].url : null\n      }}\n      >\n      <BookingSearchBox />\n\n      <section className=\"single-hotel-section\">\n        <div className=\"container\">\n          <figure className=\"img-bgas\">\n            <img\n              src={(hotel.media && hotel.media.gallery && hotel.media.gallery[0]) ? hotel.media.gallery[0].url : 'default'}\n              alt={hotel.media && hotel.media.gallery && hotel.media.gallery[0] && hotel.media.gallery[0].name} \n              />\n          </figure>\n\n          <div className=\"topline\">\n            <div className=\"title mr-auto\">\n              <h1>\n                {/* Hotel&nbsp;<strong>Sorriso</strong> */}\n                {hotel.name}\n              </h1>\n              {/* <!-- &nbsp;&nbsp;&nbsp;&nbsp; --> */}\n              <div className=\"stars\">{stars}</div>\n            </div>\n            <div className=\"single-hotel-call ml-auto\">\n              chiama!&nbsp;<span className=\"bold\">{process.env.contacts.phone.label}</span>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"single-hotel-section\">\n        <div className=\"container\">\n          <div className=\"hotel-booking-box\">\n            <div className=\"box1\">\n              <div className=\"row\">\n                <div className=\"col-lg-6\">\n                {priceList && Object.entries(priceList).map( ([treatment, prices], index) => \n                  <div className=\"prices-box\" key={index}>\n                    <PriceTable \n                      key={index}\n                      index={index}\n                      treatment={treatment}\n                      prices={prices}\n                      hotel={hotel}\n                      period={period}\n                      />\n                  </div>\n                )}\n                </div>\n                <div className=\"col-lg-4 offset-lg-2\">\n                  <div className=\"description\">\n                    <div className=\"row mb-5\">\n                      <div className=\"col-lg-6\">Offerta n. {period.id}</div>\n                      <div className=\"col-lg-6\">\n                        dal {dateFrom.format(\"DD/MM/YYYY\")}\n                        <br />\n                        al {dateTo.format(\"DD/MM/YYYY\")}\n                      </div>\n                    </div>\n                    per ulteriori informazioni contattaci a<br />\n                    <span className=\"bold\">{process.env.contacts.email.label}</span>\n                  </div>\n\n                  {/* <!-- <div className=\"price\">\n                      <span className=\"from\">da</span>\n                      <span className=\"value\">&euro; 2059,-</span>\n                  </div> --> */}\n                </div>\n              </div>\n            </div>\n{console.log('props query', props.query)}\n            <BookingForm \n              rateplan={props.period.rateplan || null}\n              hotel={props.period.rateplan.hotel || null}\n              query={props.query} \n              priceList={priceList} \n              />\n          </div>\n        </div>\n      </section>\n\n      <section className=\"section-main single-hotel-section\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-lg-3\">\n              <div className=\"content-box content-box-1\">\n                <div className=\"titoletto\">posizione</div>\n                <div className=\"description\">\n                  {hotel.details.address}<br/>\n                  {hotel.details.zip_code} {hotel.details.city} ({hotel.details.state})\n                </div>\n\n                <div className=\"titoletto\">distanze</div>\n                <div className=\"description\">\n                  <div dangerouslySetInnerHTML={{ __html: hotel.description_near.it }} />\n                </div>\n\n                {/* <div className=\"description\">\n                  <p>\n                    Piano famiglia 4=3 1 bambino fino a 12 anni in camera con 2\n                    adulti Gratis\n                  </p>\n                </div> */}\n\n                <ul className=\"hotel-service-list\">\n                  {hotel.incServices && hotel.incServices.length > 0 && hotel.incServices.map( (obj, index) => \n                    <li key={index}>\n                      <span>\n                        {/* ico */}\n                        {/* <i className=\"ico ico-childrens\"></i> */}\n                        {obj.name}\n                      </span>\n                    </li>\n                  )}\n                </ul>\n              </div>\n            </div>\n\n            <div className=\"col-lg-4\">\n              <div className=\"content-box content-box-2\">\n                <div className=\"description\">\n                  <div dangerouslySetInnerHTML={{ __html: hotel.description_short.it }} />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"col-lg-5\">\n              <div className=\"content-box content-box-3\">\n                <div className=\"description\">\n                  <div dangerouslySetInnerHTML={{ __html: hotel.description_short.it }} />\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </Layout>\n  );\n};\n\nBookingPage.getInitialProps = async params => {\n  let locs = [];\n  let hotelCategories = [];\n  let menu = null;\n  let page = null;\n  let hotel = null;\n  let period = null;\n\n  let query = {\n    checkin: params.query.checkin || null,\n    checkout: params.query.checkout || null,\n    treatment: params.query.treatment || null,\n    nights: params.query.nights || null,\n  }\n\n  try {\n    let baseService = new BaseService();\n    let init = await baseService.initApp();\n    locs = init.locs || [];\n    hotelCategories = init.hotelCategories || [];\n\n    let menuService = new MenuService();\n    menu = await menuService.get(1);\n\n    let rateplanPeriodService = new RateplanPeriodService();\n    period = await rateplanPeriodService.get(params.query.id);\n\n    if( period && period.rateplan && period.rateplan.hotel) {\n      hotel = period.rateplan.hotel\n    }\n  } catch (e) {}\n\n  return {\n    query,\n    locs,\n    hotelCategories,\n    menu,\n    page,\n    hotel,\n    period\n  };\n};\n\nexport default BookingPage;\n"]},"metadata":{},"sourceType":"module"}