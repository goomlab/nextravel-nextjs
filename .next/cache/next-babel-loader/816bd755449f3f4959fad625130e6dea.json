{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/giuseppe/Workspace/Di Costanzo Marco/nextravel.it/www/nextravel-nextjs/pages/offerte/[slug].js\";\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from \"react\";\nimport Link from \"next/link\";\nimport BaseService from \"~/packages/BaseService\";\nimport MenuService from \"~/packages/Post/services/MenuService\";\nimport PageFilterService from \"~/packages/TravelgoOne/services/PageFilterService\";\nimport HotelService from \"~/packages/TravelgoOne/services/HotelService\";\nimport TemplateArchiveHotel from \"~/components/Templates/TemplateArchiveHotel\";\n\nvar Index = function Index(props) {\n  return __jsx(TemplateArchiveHotel, _extends({}, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 5\n    }\n  }));\n};\n\n_c = Index;\n\nIndex.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(params) {\n    var menu, locs, hotelCategories, page, hotels, searchParams, baseService, init, menuService, pageFilterService, hotelService;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // let initialProps = {};\n            menu = null;\n            locs = [];\n            hotelCategories = [];\n            page = null;\n            hotels = [];\n            searchParams = {// page: 1,\n              // paginate: process.env.pagination.paginate\n            };\n            _context.prev = 6;\n            // initialProps = mainInitialProps();\n            baseService = new BaseService();\n            _context.next = 10;\n            return baseService.initApp();\n\n          case 10:\n            init = _context.sent;\n            locs = init.locs || [];\n            hotelCategories = init.hotelCategories || [];\n            menuService = new MenuService();\n            _context.next = 16;\n            return menuService.get(1);\n\n          case 16:\n            menu = _context.sent;\n            pageFilterService = new PageFilterService();\n            _context.next = 20;\n            return pageFilterService.getBySlug(params.query.slug);\n\n          case 20:\n            page = _context.sent;\n\n            if (!page) {\n              _context.next = 32;\n              break;\n            }\n\n            if (page.date_from) searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              checkin: page.date_from\n            });\n            if (page.date_to) searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              checkout: page.date_to\n            });\n            if (page.loc_id) searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              loc_id: page.loc_id\n            });\n            if (page.category_id) searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              category_id: page.category_id\n            });\n            if (parseInt(page.stars) > 0) searchParams = _objectSpread(_objectSpread({}, searchParams), {}, {\n              stars: page.stars\n            });\n            hotelService = new HotelService();\n            _context.next = 30;\n            return hotelService.query(searchParams);\n\n          case 30:\n            hotels = _context.sent;\n            console.log('hotels', hotels, searchParams);\n\n          case 32:\n            _context.next = 37;\n            break;\n\n          case 34:\n            _context.prev = 34;\n            _context.t0 = _context[\"catch\"](6);\n            console.log('error', _context.t0);\n\n          case 37:\n            return _context.abrupt(\"return\", {\n              menu: menu,\n              locs: locs,\n              hotelCategories: hotelCategories,\n              page: page,\n              hotels: hotels,\n              searchParams: searchParams\n            });\n\n          case 38:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[6, 34]]);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["/Users/giuseppe/Workspace/Di Costanzo Marco/nextravel.it/www/nextravel-nextjs/pages/offerte/[slug].js"],"names":["React","Link","BaseService","MenuService","PageFilterService","HotelService","TemplateArchiveHotel","Index","props","getInitialProps","params","menu","locs","hotelCategories","page","hotels","searchParams","baseService","initApp","init","menuService","get","pageFilterService","getBySlug","query","slug","date_from","checkin","date_to","checkout","loc_id","category_id","parseInt","stars","hotelService","console","log"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Link from \"next/link\";\n\nimport BaseService from \"~/packages/BaseService\";\nimport MenuService from \"~/packages/Post/services/MenuService\";\nimport PageFilterService from \"~/packages/TravelgoOne/services/PageFilterService\";\nimport HotelService from \"~/packages/TravelgoOne/services/HotelService\";\n\nimport TemplateArchiveHotel from \"~/components/Templates/TemplateArchiveHotel\";\n\nconst Index = props => {\n  return (\n    <TemplateArchiveHotel {...props} />\n  );\n};\n\nIndex.getInitialProps = async params => {\n  // let initialProps = {};\n  let menu = null;\n  let locs = [];\n  let hotelCategories = [];\n  let page = null;\n  let hotels = [];\n  let searchParams = {\n    // page: 1,\n    // paginate: process.env.pagination.paginate\n  };\n  try {\n    // initialProps = mainInitialProps();\n\n    let baseService = new BaseService();\n    let init = await baseService.initApp();\n    locs = init.locs || [];\n    hotelCategories = init.hotelCategories || [];\n\n    let menuService = new MenuService();\n    menu = await menuService.get(1);\n\n    let pageFilterService = new PageFilterService();\n    page = await pageFilterService.getBySlug(params.query.slug);\n    if( page ){\n      if( page.date_from ) searchParams = {...searchParams, checkin: page.date_from};\n      if( page.date_to ) searchParams = {...searchParams, checkout: page.date_to};\n      if( page.loc_id ) searchParams = {...searchParams, loc_id: page.loc_id};\n      if( page.category_id ) searchParams = {...searchParams, category_id: page.category_id};\n      if( parseInt(page.stars) > 0 ) searchParams = {...searchParams, stars: page.stars};\n\n      let hotelService = new HotelService();\n      hotels = await hotelService.query(searchParams);\n      console.log('hotels', hotels, searchParams)\n    }\n  } catch (e) {\n    console.log('error', e)\n  }\n\n  return {\n    menu,\n    locs,\n    hotelCategories,\n    page,\n    hotels,\n    searchParams\n  };\n};\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}