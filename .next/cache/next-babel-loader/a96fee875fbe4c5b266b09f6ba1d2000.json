{"ast":null,"code":"var __jsx = React.createElement;\nimport React from \"react\";\nimport Link from \"next/link\";\nimport NextHead from 'next/head';\nimport { HotelSchema, makeHotelSchema } from \"~/components/JsonLdSchema\";\nimport MenuService from \"~/packages/Post/services/MenuService\";\nimport PostService from \"~/packages/Post/services/PostService\";\nimport HotelService from \"~/packages/TravelgoOne/services/HotelService\";\nimport Layout from \"~/components/Layouts/MainLayout/MainLayout\";\nimport BookingSearchBox from \"~/components/Partials/BookingSearchBox\";\nimport HotelArchive2 from \"~/components/Partials/HotelArchive2\";\n\nconst Index = props => {\n  if (!props.page || props.page.length <= 0) {\n    return __jsx(Layout, {\n      settings: {\n        menu: props.menu\n      }\n    }, __jsx(\"div\", null, \"Data not found\"));\n  } // React.useEffect(() => {\n  //   let filter = {\n  //     loc_id: props.query.loc_id || '',\n  //     category_id: props.query.category_id || '',\n  //     checkin: props.query.checkin || '',\n  //     checkout: props.query.checkout || '',\n  //     nights: props.query.nights || '',\n  //     page: props.query.page || 1,\n  //     // num_per_page: 15,\n  //     // orderBy: 'date_from',\n  //     // orderHow: 'asc'\n  //     paginate: 2\n  //   }\n  //   let hotelService = new HotelService();\n  //   hotelService.query(filter)\n  //   .then(response => {\n  //     console.log('response', response)\n  //   });\n  // }, [])\n\n\n  return __jsx(Layout, {\n    settings: {\n      template: \"accommodation-page\",\n      menu: props.menu\n    },\n    meta: {\n      title: props.page.meta_title.it,\n      description: props.page.meta_description.it,\n      url: `${process.env.meta.url}/accommodations`,\n      // image: (props.page.media && props.page.media.gallery && props.page.media.gallery[0]) ? props.page.media.gallery[0].url : null\n      image: props.page.media && props.page.media.thumbnails && props.page.media.thumbnails[0] ? props.page.media.thumbnails[0].url : null\n    }\n  }, __jsx(NextHead, null, props.hotels && props.hotels.data && props.hotels.data.length > 0 && Object.entries(props.hotels.data).map(([key, hotel]) => __jsx(\"script\", {\n    key: `jobJSON-${hotel.id}`,\n    type: \"application/ld+json\",\n    dangerouslySetInnerHTML: {\n      __html: JSON.stringify(makeHotelSchema(hotel))\n    }\n  }))), __jsx(BookingSearchBox, {\n    query: props.query\n  }), __jsx(\"section\", {\n    className: \"section-main\"\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"div\", {\n    className: \"primary-title text-center\"\n  }, __jsx(\"h2\", null, \"Prenota la tua vacanza tra una vasta scelta di Hotel selezionati.\")), __jsx(\"div\", {\n    className: \"primary-description text-center\"\n  }, \"Per qualsiasi informazione non esitare a contattarci allo\", \" \", __jsx(\"strong\", null, process.env.contacts.phone.label)))), __jsx(HotelArchive2, {\n    hotels: props.hotels && props.hotels.data ? props.hotels.data : [],\n    meta: props.hotels.meta,\n    filter: props.hotels.filter\n  }));\n};\n\nIndex.getInitialProps = async ctx => {\n  console.log('ctx', ctx);\n  let filter = {\n    loc_id: ctx.query.loc_id || '',\n    category_id: ctx.query.category_id || '',\n    checkin: ctx.query.checkin || '',\n    checkout: ctx.query.checkout || '',\n    // nights: ctx.query.nights || '',\n    hasEmptyPeriods: true,\n    page: ctx.query.page || 1,\n    // num_per_page: 4,\n    orderBy: 'order_seq',\n    orderHow: 'asc',\n    paginate: process.env.pagination.paginate\n  };\n  let menu = null;\n  let page = null;\n  let hotels = [];\n\n  try {\n    // initialProps = mainInitialProps();\n    let menuService = new MenuService();\n    menu = await menuService.get(1);\n    let postService = new PostService();\n    page = await postService.get(2);\n    let hotelService = new HotelService();\n    hotels = await hotelService.query(filter);\n    hotels.filter = filter;\n  } catch (e) {}\n\n  return {\n    params: ctx.params,\n    query: ctx.query,\n    menu,\n    page,\n    hotels\n  };\n};\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}