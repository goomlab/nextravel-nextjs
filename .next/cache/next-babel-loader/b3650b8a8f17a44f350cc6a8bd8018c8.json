{"ast":null,"code":"var _jsxFileName = \"/Users/giuseppe/Workspace/Di Costanzo Marco/nextravel.it/www/nextravel-nextjs/components/Partials/BookingSearchBox.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from \"react\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\nimport BaseService from \"~/packages/BaseService\";\nimport DateRangePicker from 'react-bootstrap-daterangepicker';\nimport SwiperCore, { Swiper, Navigation, Pagination, Scrollbar, A11y } from 'swiper';\nSwiperCore.use([Navigation, Pagination, Scrollbar, A11y]);\n\nconst BookingSearchBox = props => {\n  console.log('booking search props', props);\n  const swiperBookingMonths = React.useRef(null);\n  const swiperBookingHolidays = React.useRef(null);\n  const defaultCheckin = moment().add(1, 'days').format('YYYY-MM-DD');\n  const defaultCheckout = moment().add(7, 'days').format('YYYY-MM-DD');\n  const defaultCheckinFormatted = moment().add(1, 'days').format('DD/MM/YYYY');\n  const defaultCheckoutFormatted = moment().add(7, 'days').format('DD/MM/YYYY');\n\n  const initCheckin = () => {\n    if (props.query && props.query.checkin != undefined && props.query.checkin != \"\") {\n      return props.query.checkin;\n    }\n\n    if (props.searchParams && props.searchParams.checkin != undefined && props.searchParams.checkin != \"\") {\n      return props.searchParams.checkin;\n    }\n\n    return defaultCheckin;\n  };\n\n  const initCheckout = () => {\n    if (props.query && props.query.checkout != undefined && props.query.checkout != \"\") {\n      return props.query.checkout;\n    }\n\n    if (props.searchParams && props.searchParams.checkout != undefined && props.searchParams.checkout != \"\") {\n      return props.searchParams.checkout;\n    }\n\n    return defaultCheckout;\n  };\n\n  const [state, setState] = React.useState({\n    loc_id: props.query && props.query.loc_id || '',\n    category_id: props.query && props.query.category_id || '',\n    checkin: initCheckin(),\n    checkout: initCheckout(),\n    nights: props.query && props.query.nights || ''\n  });\n  const [params, setParams] = React.useState({\n    locs: [],\n    hotelCategories: [],\n    months: [],\n    specials: []\n  });\n  React.useEffect(() => {\n    // swipers\n    if (props.full) {\n      swiperBookingMonths.current = new Swiper('#swiperBookingMonths', {\n        grubCursor: false,\n        simulateTouch: false,\n        direction: 'horizontal',\n        speed: 600,\n        slidesPerView: 10,\n        spaceBetween: 30,\n        breakpoints: {\n          1: {\n            slidesPerView: 3,\n            spaceBetween: 30\n          },\n          320: {\n            slidesPerView: 4,\n            spaceBetween: 30\n          },\n          768: {\n            slidesPerView: 8,\n            spaceBetween: 30\n          },\n          992: {\n            slidesPerView: 10,\n            spaceBetween: 30\n          },\n          1200: {\n            slidesPerView: 10,\n            spaceBetween: 30\n          }\n        },\n        navigation: {\n          nextEl: '#swiperBookingMonths-button-next',\n          prevEl: '#swiperBookingMonths-button-prev'\n        }\n      }); // swiperBookingHolidays.current = new Swiper('#swiperBookingHolidays', {\n      //   grubCursor: false,\n      //   simulateTouch : false,\n      //   direction: 'horizontal',\n      //   speed: 600,\n      //   slidesPerView: 10,\n      //   spaceBetween: 30,\n      //   navigation: {\n      //     nextEl: '#swiperBookingHolidays-button-next',\n      //     prevEl: '#swiperBookingHolidays-button-prev',\n      //   }\n      // })\n    } // init booking\n\n\n    let baseService = new BaseService();\n    baseService.initApp().then(response => {\n      setParams({\n        locs: response.locs || [],\n        hotelCategories: response.hotelCategories || [],\n        months: response.filterPages.months || [],\n        specials: response.filterPages.specials || []\n      });\n      if (props.full && swiperBookingMonths && swiperBookingMonths.current) swiperBookingMonths.current.update(); // if( props.full && swiperBookingHolidays && swiperBookingHolidays.current )\n      //   swiperBookingHolidays.current.update()\n    }).catch(error => {\n      console.log('error', error);\n    }); // setState({\n    //   loc_id: (props.query && props.query.loc_id) || null,\n    //   category_id: (props.query && props.query.category_id) || null,\n    //   checkin: (props.query && props.query.checkin) || null,\n    //   checkout: (props.query && props.query.checkout) || null,\n    //   nights: (props.query && props.query.nights) || null\n    // })\n  }, []);\n  React.useEffect(() => {\n    if (props.full) {\n      swiperBookingHolidays.current = new Swiper('#swiperBookingHolidays', {\n        grubCursor: false,\n        simulateTouch: false,\n        direction: 'horizontal',\n        speed: 600,\n        slidesPerView: 10,\n        spaceBetween: 30,\n        breakpoints: {\n          1: {\n            slidesPerView: 3,\n            spaceBetween: 0\n          },\n          320: {\n            slidesPerView: 4,\n            spaceBetween: 0\n          },\n          768: {\n            slidesPerView: 5,\n            spaceBetween: 0\n          },\n          992: {\n            slidesPerView: 10,\n            spaceBetween: 0\n          },\n          1200: {\n            slidesPerView: 10,\n            spaceBetween: 0\n          }\n        },\n        navigation: {\n          nextEl: '#swiperBookingHolidays-button-next',\n          prevEl: '#swiperBookingHolidays-button-prev'\n        }\n      });\n    }\n  }, [params]); // const checkinFormatted = (props.query && props.query.checkin && props.query.checkin != \"\") ? moment(props.query.checkin, 'YYYY-MM-DD').format('DD/MM/YYYY') : defaultCheckinFormatted;\n  // const checkoutFormatted = (props.query && props.query.checkout && props.query.checkout != \"\") ? moment(props.query.checkout, 'YYYY-MM-DD').format('DD/MM/YYYY') : defaultCheckoutFormatted;\n\n  const checkinFormatted = state.checkin != \"\" && state.checkin != undefined ? moment(state.checkin, 'YYYY-MM-DD').format('DD/MM/YYYY') : defaultCheckinFormatted;\n  const checkoutFormatted = state.checkout != \"\" && state.checkout != undefined ? moment(state.checkout, 'YYYY-MM-DD').format('DD/MM/YYYY') : defaultCheckoutFormatted;\n\n  const getMonths = () => {\n    // mesi\n    let months = [];\n    moment.locale('it');\n    var now = moment();\n    let i = 0;\n\n    do {\n      months.push(__jsx(Link, {\n        href: \"/offerte/[slug]\",\n        as: `/offerte/${now.format('MMMM').toLowerCase()}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 9\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }\n      }, __jsx(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }\n      }, now.format('MMM')), \" \", now.format('YY'))));\n      i++;\n      now.add(1, 'months');\n    } while (i < 12);\n\n    return months;\n  };\n\n  const onChange = e => {\n    let newState = Object.assign({}, state);\n    newState[e.target.name] = e.target.value;\n    setState(_objectSpread({}, newState));\n  };\n\n  const onDatePickerApply = (event, picker) => {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      checkin: picker.startDate.format('YYYY-MM-DD'),\n      checkout: picker.endDate.format('YYYY-MM-DD')\n    }));\n  };\n\n  const onSumbit = e => {\n    e.preventDefault();\n    var url = \"/accommodations?\";\n\n    for (let [key, value] of Object.entries(state)) url += key + '=' + value + '&';\n\n    window.location.href = url;\n  };\n\n  const months = getMonths();\n  return __jsx(\"section\", {\n    className: \"booking-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }\n  }, __jsx(\"form\", {\n    className: \"booking-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"col-lg-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, __jsx(\"select\", {\n    className: \"custom-select\",\n    name: \"loc_id\",\n    id: \"loc_id\",\n    onChange: e => onChange(e),\n    value: state.loc_id || '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 15\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 17\n    }\n  }, \"Localit\\xE0\"), params.locs && params.locs.map((obj, index) => __jsx(\"option\", {\n    key: index,\n    value: obj.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 19\n    }\n  }, obj.name)))), __jsx(\"div\", {\n    className: \"col-lg-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 13\n    }\n  }, __jsx(\"select\", {\n    className: \"custom-select\",\n    name: \"category_id\",\n    id: \"category_id\",\n    onChange: e => onChange(e),\n    value: state.category_id || '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 17\n    }\n  }, \"Struttura\"), params.hotelCategories && params.hotelCategories.map((obj, index) => __jsx(\"option\", {\n    key: index,\n    value: obj.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 19\n    }\n  }, obj.name)))), __jsx(\"div\", {\n    className: \"col-lg-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }\n  }, __jsx(DateRangePicker, {\n    initialSettings: {\n      // startDate: state.checkinFormatted,\n      // endDate: state.checkoutFormatted,\n      startDate: moment(state.checkin, 'YYYY-MM-DD'),\n      endDate: moment(state.checkout, 'YYYY-MM-DD'),\n      autoApply: true,\n      startDate: moment(),\n      locale: {\n        'cancelLabel': 'Cancella',\n        'applyLabel': 'Applica'\n      }\n    },\n    onApply: onDatePickerApply,\n    style: {\n      display: 'block',\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 15\n    }\n  }, __jsx(\"input\", {\n    className: \"form-control\",\n    id: \"booking_dateRangePicker\",\n    type: \"text\",\n    placeholder: \"Checkin\",\n    value: checkinFormatted != \"\" && checkoutFormatted != \"\" ? `${checkinFormatted} - ${checkoutFormatted}` : '',\n    onChange: e => {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 17\n    }\n  })), __jsx(\"input\", {\n    type: \"hidden\",\n    name: \"checkin\",\n    id: \"checkin\",\n    onChange: e => onChange(e),\n    value: state.checkin || '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 15\n    }\n  }), __jsx(\"input\", {\n    type: \"hidden\",\n    name: \"checkout\",\n    id: \"checkout\",\n    onChange: e => onChange(e),\n    value: state.checkout || '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"col-lg-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }\n  }, __jsx(\"select\", {\n    className: \"custom-select\",\n    name: \"nights\",\n    id: \"nights\",\n    onChange: e => onChange(e),\n    value: state.nights || '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 15\n    }\n  }, __jsx(\"option\", {\n    value: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 17\n    }\n  }, \"Notti\"), __jsx(\"option\", {\n    value: \"1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 17\n    }\n  }, \"1\"), __jsx(\"option\", {\n    value: \"2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 17\n    }\n  }, \"2\"), __jsx(\"option\", {\n    value: \"3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }\n  }, \"3\"), __jsx(\"option\", {\n    value: \"4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 17\n    }\n  }, \"4\"), __jsx(\"option\", {\n    value: \"5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 17\n    }\n  }, \"5\"), __jsx(\"option\", {\n    value: \"6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, \"6\"), __jsx(\"option\", {\n    value: \"7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 17\n    }\n  }, \"7\"))), __jsx(\"div\", {\n    className: \"col-lg-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-yellow\",\n    onClick: e => onSumbit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 15\n    }\n  }, \"Cerca\")))), props.full && __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"booking-months\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    id: \"swiperBookingMonths\",\n    className: \"swiper-container swiperBookingMonths\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"swiper-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 17\n    }\n  }, months.map((obj, index) => __jsx(\"div\", {\n    className: \"swiper-slide\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 21\n    }\n  }, obj)))), __jsx(\"div\", {\n    id: \"swiperBookingMonths-button-prev\",\n    className: \"swiper-button-prev\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    id: \"swiperBookingMonths-button-next\",\n    className: \"swiper-button-next\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 15\n    }\n  })), params.specials && params.specials.length > 0 && __jsx(\"div\", {\n    className: \"booking-holidays\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    id: \"swiperBookingHolidays\",\n    className: \"swiper-container swiperBookingMonths\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"swiper-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 17\n    }\n  }, params.specials && params.specials.map((obj, index) => __jsx(\"div\", {\n    className: \"swiper-slide\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 21\n    }\n  }, __jsx(Link, {\n    href: \"/offerte/[slug]\",\n    as: `/offerte/${obj.slug.it}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 23\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 25\n    }\n  }, obj.title.it)))))), __jsx(\"div\", {\n    id: \"swiperBookingHolidays-button-prev\",\n    className: \"swiper-button-prev\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    id: \"swiperBookingHolidays-button-next\",\n    className: \"swiper-button-next\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 15\n    }\n  })))));\n};\n\nexport default BookingSearchBox;","map":{"version":3,"sources":["/Users/giuseppe/Workspace/Di Costanzo Marco/nextravel.it/www/nextravel-nextjs/components/Partials/BookingSearchBox.js"],"names":["React","moment","Link","BaseService","DateRangePicker","SwiperCore","Swiper","Navigation","Pagination","Scrollbar","A11y","use","BookingSearchBox","props","console","log","swiperBookingMonths","useRef","swiperBookingHolidays","defaultCheckin","add","format","defaultCheckout","defaultCheckinFormatted","defaultCheckoutFormatted","initCheckin","query","checkin","undefined","searchParams","initCheckout","checkout","state","setState","useState","loc_id","category_id","nights","params","setParams","locs","hotelCategories","months","specials","useEffect","full","current","grubCursor","simulateTouch","direction","speed","slidesPerView","spaceBetween","breakpoints","navigation","nextEl","prevEl","baseService","initApp","then","response","filterPages","update","catch","error","checkinFormatted","checkoutFormatted","getMonths","locale","now","i","push","toLowerCase","onChange","e","newState","Object","assign","target","name","value","onDatePickerApply","event","picker","startDate","endDate","onSumbit","preventDefault","url","key","entries","window","location","href","map","obj","index","id","autoApply","display","width","length","slug","it","title"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport moment from \"moment\";\nimport Link from \"next/link\";\n\nimport BaseService from \"~/packages/BaseService\";\n\nimport DateRangePicker from 'react-bootstrap-daterangepicker';\n\nimport SwiperCore, { Swiper, Navigation, Pagination, Scrollbar, A11y } from 'swiper';\nSwiperCore.use([Navigation, Pagination, Scrollbar, A11y]);\n\nconst BookingSearchBox = props => {console.log('booking search props', props)\n  const swiperBookingMonths = React.useRef(null)\n  const swiperBookingHolidays = React.useRef(null)\n\n  const defaultCheckin = moment().add(1, 'days').format('YYYY-MM-DD');\n  const defaultCheckout = moment().add(7, 'days').format('YYYY-MM-DD');\n  const defaultCheckinFormatted = moment().add(1, 'days').format('DD/MM/YYYY');\n  const defaultCheckoutFormatted = moment().add(7, 'days').format('DD/MM/YYYY');\n\n  const initCheckin = () => {\n    if( props.query && props.query.checkin != undefined && props.query.checkin != \"\" ){\n      return props.query.checkin\n    }\n    if( props.searchParams && props.searchParams.checkin != undefined && props.searchParams.checkin != \"\" ){\n      return props.searchParams.checkin\n    }\n    return defaultCheckin;\n  }\n\n  const initCheckout = () => {\n    if( props.query && props.query.checkout != undefined && props.query.checkout != \"\" ){\n      return props.query.checkout\n    }\n    if( props.searchParams && props.searchParams.checkout != undefined && props.searchParams.checkout != \"\" ){\n      return props.searchParams.checkout\n    }\n    return defaultCheckout;\n  }\n\n  const [state, setState] = React.useState({\n    loc_id: (props.query && props.query.loc_id) || '',\n    category_id: (props.query && props.query.category_id) || '',\n    checkin: initCheckin(),\n    checkout: initCheckout(),\n    nights: (props.query && props.query.nights) || ''\n  });\n\n  const [params, setParams] = React.useState({\n    locs: [],\n    hotelCategories: [],\n    months: [],\n    specials: []\n  })\n\n\n  React.useEffect(() => {\n    // swipers\n    if( props.full ) {\n      swiperBookingMonths.current = new Swiper('#swiperBookingMonths', {\n        grubCursor: false,\n        simulateTouch : false,\n        direction: 'horizontal',\n        speed: 600,\n        slidesPerView: 10,\n        spaceBetween: 30,\n        breakpoints: {\n          1: {\n            slidesPerView: 3,\n            spaceBetween: 30\n          },\n          320: {\n            slidesPerView: 4,\n            spaceBetween: 30\n          },\n          768: {\n            slidesPerView: 8,\n            spaceBetween: 30\n          },\n          992: {\n            slidesPerView: 10,\n            spaceBetween: 30\n          },\n          1200: {\n            slidesPerView: 10,\n            spaceBetween: 30\n          }\n        },\n        navigation: {\n          nextEl: '#swiperBookingMonths-button-next',\n          prevEl: '#swiperBookingMonths-button-prev',\n        }\n      })\n\n      // swiperBookingHolidays.current = new Swiper('#swiperBookingHolidays', {\n      //   grubCursor: false,\n      //   simulateTouch : false,\n      //   direction: 'horizontal',\n      //   speed: 600,\n      //   slidesPerView: 10,\n      //   spaceBetween: 30,\n      //   navigation: {\n      //     nextEl: '#swiperBookingHolidays-button-next',\n      //     prevEl: '#swiperBookingHolidays-button-prev',\n      //   }\n      // })\n    }\n\n    // init booking\n    let baseService = new BaseService();\n    baseService.initApp()\n    .then(response => {\n      setParams({\n        locs: response.locs || [],\n        hotelCategories: response.hotelCategories || [],\n        months: response.filterPages.months || [],\n        specials: response.filterPages.specials || [],\n      })\n      \n      if( props.full && swiperBookingMonths && swiperBookingMonths.current )\n        swiperBookingMonths.current.update()\n      // if( props.full && swiperBookingHolidays && swiperBookingHolidays.current )\n      //   swiperBookingHolidays.current.update()\n    })\n    .catch(error => {\n      console.log('error', error)\n    });\n\n    // setState({\n    //   loc_id: (props.query && props.query.loc_id) || null,\n    //   category_id: (props.query && props.query.category_id) || null,\n    //   checkin: (props.query && props.query.checkin) || null,\n    //   checkout: (props.query && props.query.checkout) || null,\n    //   nights: (props.query && props.query.nights) || null\n    // })\n  },[])\n\n\n  React.useEffect(() => {\n    if( props.full ) {\n      swiperBookingHolidays.current = new Swiper('#swiperBookingHolidays', {\n        grubCursor: false,\n        simulateTouch : false,\n        direction: 'horizontal',\n        speed: 600,\n        slidesPerView: 10,\n        spaceBetween: 30,\n        breakpoints: {\n          1: {\n            slidesPerView: 3,\n            spaceBetween: 0\n          },\n          320: {\n            slidesPerView: 4,\n            spaceBetween: 0\n          },\n          768: {\n            slidesPerView: 5,\n            spaceBetween: 0\n          },\n          992: {\n            slidesPerView: 10,\n            spaceBetween: 0\n          },\n          1200: {\n            slidesPerView: 10,\n            spaceBetween: 0\n          }\n        },\n        navigation: {\n          nextEl: '#swiperBookingHolidays-button-next',\n          prevEl: '#swiperBookingHolidays-button-prev',\n        }\n      })\n    }\n  }, [params])\n\n\n  // const checkinFormatted = (props.query && props.query.checkin && props.query.checkin != \"\") ? moment(props.query.checkin, 'YYYY-MM-DD').format('DD/MM/YYYY') : defaultCheckinFormatted;\n  // const checkoutFormatted = (props.query && props.query.checkout && props.query.checkout != \"\") ? moment(props.query.checkout, 'YYYY-MM-DD').format('DD/MM/YYYY') : defaultCheckoutFormatted;\n  const checkinFormatted = (state.checkin != \"\" && state.checkin != undefined) ? moment(state.checkin, 'YYYY-MM-DD').format('DD/MM/YYYY') : defaultCheckinFormatted;\n  const checkoutFormatted = (state.checkout != \"\" && state.checkout != undefined) ? moment(state.checkout, 'YYYY-MM-DD').format('DD/MM/YYYY') : defaultCheckoutFormatted;\n\n  const getMonths = () => {\n    // mesi\n    let months = [];\n    moment.locale('it');\n    var now = moment();\n    let i = 0;\n    do {\n      months.push(\n        <Link href=\"/offerte/[slug]\" as={`/offerte/${now.format('MMMM').toLowerCase()}`}>\n          <a>\n            <strong>{now.format('MMM')}</strong> {now.format('YY')}\n          </a>\n        </Link>\n      );\n      i++;\n      now.add(1, 'months');\n    }while(i<12);\n    \n    return months;\n  }\n\n  const onChange = (e) => {\n    let newState = Object.assign({}, state);\n    newState[e.target.name] = e.target.value;\n    setState({\n      ...newState\n    })\n  }\n\n  const onDatePickerApply = (event, picker) => {\n    setState({\n      ...state,\n      checkin: picker.startDate.format('YYYY-MM-DD'),\n      checkout: picker.endDate.format('YYYY-MM-DD'),\n    })\n  }\n\n  const onSumbit = (e) => {\n    e.preventDefault();\n    var url = \"/accommodations?\";\n    for(let [key, value] of Object.entries(state))\n      url += key + '=' + value + '&';\n    window.location.href = url;\n  }\n\n  const months = getMonths();\n  return (\n    <section className=\"booking-box\">\n      <div className=\"container\">\n        <form className=\"booking-form\">\n          <div className=\"row\">\n            <div className=\"col-lg-3\">\n              <select className=\"custom-select\" name=\"loc_id\" id=\"loc_id\" onChange={(e)=>onChange(e)} value={state.loc_id || ''}>\n                <option value=\"\">Località</option>\n                {params.locs && params.locs.map( (obj, index) => \n                  <option key={index} value={obj.id}>{obj.name}</option>\n                )}\n              </select>\n            </div>\n            <div className=\"col-lg-3\">\n              <select className=\"custom-select\" name=\"category_id\" id=\"category_id\" onChange={(e)=>onChange(e)} value={state.category_id || ''}>\n                <option value=\"\">Struttura</option>\n                {params.hotelCategories && params.hotelCategories.map( (obj, index) => \n                  <option key={index} value={obj.id}>{obj.name}</option>\n                )}\n              </select>\n            </div>\n\n            <div className=\"col-lg-3\">\n              <DateRangePicker\n                initialSettings={{\n                  // startDate: state.checkinFormatted,\n                  // endDate: state.checkoutFormatted,\n                  startDate: moment(state.checkin, 'YYYY-MM-DD'),\n                  endDate: moment(state.checkout, 'YYYY-MM-DD'),\n                  autoApply: true,\n                  startDate: moment(),\n                  locale: {\n                    'cancelLabel': 'Cancella',\n                    'applyLabel': 'Applica'\n                  } \n                }}\n                onApply={onDatePickerApply}\n                style={{display:'block', width: '100%'}}\n              >\n                <input\n                  className=\"form-control\"\n                  id=\"booking_dateRangePicker\"\n                  type=\"text\"\n                  placeholder=\"Checkin\"\n                  value={(checkinFormatted != \"\" && checkoutFormatted != \"\") ? (`${checkinFormatted} - ${checkoutFormatted}`) : ''}\n                  onChange={(e) => {}}\n                />\n              </DateRangePicker>\n              <input type=\"hidden\" name=\"checkin\" id=\"checkin\" onChange={(e)=>onChange(e)} value={state.checkin || ''}/>\n              <input type=\"hidden\" name=\"checkout\" id=\"checkout\" onChange={(e)=>onChange(e)} value={state.checkout || ''}/>\n            </div>\n            <div className=\"col-lg-2\">\n              <select className=\"custom-select\" name=\"nights\" id=\"nights\" onChange={(e)=>onChange(e)} value={state.nights || ''}>\n                <option value=\"\">Notti</option>\n                <option value=\"1\">1</option>\n                <option value=\"2\">2</option>\n                <option value=\"3\">3</option>\n                <option value=\"4\">4</option>\n                <option value=\"5\">5</option>\n                <option value=\"6\">6</option>\n                <option value=\"7\">7</option>\n              </select>\n            </div>\n            <div className=\"col-lg-1\">\n              <button type=\"submit\" className=\"btn btn-yellow\" onClick={(e)=>onSumbit(e)}>\n                Cerca\n              </button>\n            </div>\n          </div>\n        </form>\n\n        {props.full &&\n          <React.Fragment>\n            <div className=\"booking-months\">\n              <div id=\"swiperBookingMonths\" className=\"swiper-container swiperBookingMonths\">\n                <div className=\"swiper-wrapper\">\n                  {months.map( (obj, index) => \n                    <div className=\"swiper-slide\" key={index}>\n                      {obj}\n                    </div>\n                  )}\n                </div>\n              </div>\n              <div id=\"swiperBookingMonths-button-prev\" className=\"swiper-button-prev\"></div>\n              <div id=\"swiperBookingMonths-button-next\" className=\"swiper-button-next\"></div>\n            </div>\n            \n            {params.specials && params.specials.length > 0 &&\n            <div className=\"booking-holidays\">\n              <div id=\"swiperBookingHolidays\" className=\"swiper-container swiperBookingMonths\">\n                <div className=\"swiper-wrapper\">\n                  {params.specials && params.specials.map( (obj, index) => \n                    <div className=\"swiper-slide\" key={index}>\n                      <Link href=\"/offerte/[slug]\" as={`/offerte/${obj.slug.it}`}>\n                        <a>\n                          {obj.title.it}\n                        </a>\n                      </Link>\n                    </div>\n                  )}\n                </div>\n              </div>\n              <div id=\"swiperBookingHolidays-button-prev\" className=\"swiper-button-prev\"></div>\n              <div id=\"swiperBookingHolidays-button-next\" className=\"swiper-button-next\"></div>\n            </div>\n            }\n          </React.Fragment>\n        }\n      </div>\n    </section>\n  );\n};\n\nexport default BookingSearchBox;"]},"metadata":{},"sourceType":"module"}